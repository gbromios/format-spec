!function(t,i){"use strict";"function"==typeof define&&define.amd?define.call(t,i):"object"==typeof exports?module.exports=i():t.format_spec=i()}(this,function(){var t=this,i={},e=function(t,i){var e=t,n=t.indexOf(":");n>=0&&(t.slice(n+1),e=t.slice(0,n)),this.index=null,this.nParts=e.split(".");var r=this.nParts.shift();r.match(/^[0-9]+$/)?this.index=parseInt(r,10):""===r?this.nParts.length?this.index=0:this.index=i:(this.index=0,this.nParts.unshift(r)),this.fspec={type:null,fill:" ",align:null,sign:null,width:null,precision:null}};e.prototype.getValue=function(t){var i=t[this.index];"function"==typeof i&&(i=i());var e;return this.nParts.forEach(function(t){e=i,"function"==typeof(i=i[t])&&(i=i.apply(e))}),i};var n=function(t){this._fmt=t,this._len=t.length,this.parts=[],this.substitutions=0;for(var i=0;;){var e=this.getLiteral(i);if(e.value&&this.parts.push(e.value),e.end_pos>=this._len)break;i=e.end_pos;var n=this.getSubstitution(i);this.parts.push(n.obj),i=n.end_pos}return this};n.prototype.getLiteral=function(t){for(var i=t,e=function(){return this._fmt.slice(t,i).replace(/{{/g,"{").replace(/}}/g,"}")};i<this._len;)switch(this._fmt[i]){case"{":if("{"!==this._fmt[i+1]){if(i+1>=this._len)throw this.getError("hit EOF while opening substitution",i);return{value:e.apply(this),end_pos:i+1}}i+=2;break;case"}":if("}"!==this._fmt[i+1])throw this.getError("can't close a substitution if you're not inside of one; use }} for a literal close-curly-brace",i);i+=2;break;default:i++}return{value:e.apply(this),end_pos:i}},n.prototype.getSubstitution=function(t){for(var i=t;i<this._len;)switch(this._fmt[i]){case"{":throw this.getError("{ is illegal inside a substitution",i);case"}":return{obj:new e(this._fmt.slice(t,i),this.substitutions++),end_pos:i+1};default:i++}throw this.getError("got to EOF without ending substitution",i)},n.prototype.getError=function(t,i){var e="Error parsing format spec : "+t;return e+="\nformat : "+this._fmt,void 0!==i&&i<this._len&&(e+="\n        "+"".repeat(i)+"^"),new Error(e)},n.prototype.debug=function(){for(var t=0;t<this.parts.length;t++)this.parts[t]},n.prototype.getValue=function(t){return this.parts.reduce(function(i,n){return i+(n instanceof e?n.getValue(t):n)},"")};var r=function(){return new n(this).getValue(arguments)},s=function(t){return r.apply(t,Array.prototype.slice.call(arguments,1))};return s.unbindGlobal=function(e){e=e||"format",t.String.prototype[e]=i[e],delete i[e]},s.bindGlobal=function(e){e=e||"format",void 0===i&&(i[e]=t.String.prototype[e]),t.String.prototype[e]=r},s.bindGlobal(),s});
